using Test

include("./perms.jl")


@testset "all 2! perms of array of length 2" begin
  T = Int
  s = VT{T}(collect(1:2))

  @test perms(s) == VVT{T}([[1, 2],
                            [2, 1]])
end

@testset "all 3! perms of array of length 3" begin
  T = Int
  s = VT{T}(collect(1:3))

  @test perms(s) == VVT{T}([[2, 3, 1],
                            [3, 2, 1],
                            [1, 3, 2],
                            [3, 1, 2],
                            [1, 2, 3],
                            [2, 1, 3]])
end

@testset "all 4! perms of array of length 4" begin
  T = Int
  s = VT{T}([2, 5, 10, 12, 15])

  @test perms(s) == VVT{T}([[12, 15, 10, 5, 2], [15, 12, 10, 5, 2], [10, 15, 12, 5, 2], [15, 10, 12, 5, 2], [10, 12, 15, 5, 2], [12, 10, 15, 5, 2], [12, 15, 5, 10, 2], [15, 12, 5, 10, 2], [5, 15, 12, 10, 2], [15, 5, 12, 10, 2], [5, 12, 15, 10, 2], [12, 5, 15, 10, 2], [10, 15, 5, 12, 2], [15, 10, 5, 12, 2], [5, 15, 10, 12, 2], [15, 5, 10, 12, 2], [5, 10, 15, 12, 2], [10, 5, 15, 12, 2], [10, 12, 5, 15, 2], [12, 10, 5, 15, 2], [5, 12, 10, 15, 2], [12, 5, 10, 15, 2], [5, 10, 12, 15, 2], [10, 5, 12, 15, 2], [12, 15, 10, 2, 5], [15, 12, 10, 2, 5], [10, 15, 12, 2, 5], [15, 10, 12, 2, 5], [10, 12, 15, 2, 5], [12, 10, 15, 2, 5], [12, 15, 2, 10, 5], [15, 12, 2, 10, 5], [2, 15, 12, 10, 5], [15, 2, 12, 10, 5], [2, 12, 15, 10, 5], [12, 2, 15, 10, 5], [10, 15, 2, 12, 5], [15, 10, 2, 12, 5], [2, 15, 10, 12, 5], [15, 2, 10, 12, 5], [2, 10, 15, 12, 5], [10, 2, 15, 12, 5], [10, 12, 2, 15, 5], [12, 10, 2, 15, 5], [2, 12, 10, 15, 5], [12, 2, 10, 15, 5], [2, 10, 12, 15, 5], [10, 2, 12, 15, 5], [12, 15, 5, 2, 10], [15, 12, 5, 2, 10], [5, 15, 12, 2, 10], [15, 5, 12, 2, 10], [5, 12, 15, 2, 10], [12, 5, 15, 2, 10], [12, 15, 2, 5, 10], [15, 12, 2, 5, 10], [2, 15, 12, 5, 10], [15, 2, 12, 5, 10], [2, 12, 15, 5, 10], [12, 2, 15, 5, 10], [5, 15, 2, 12, 10], [15, 5, 2, 12, 10], [2, 15, 5, 12, 10], [15, 2, 5, 12, 10], [2, 5, 15, 12, 10], [5, 2, 15, 12, 10], [5, 12, 2, 15, 10], [12, 5, 2, 15, 10], [2, 12, 5, 15, 10], [12, 2, 5, 15, 10], [2, 5, 12, 15, 10], [5, 2, 12, 15, 10], [10, 15, 5, 2, 12], [15, 10, 5, 2, 12], [5, 15, 10, 2, 12], [15, 5, 10, 2, 12], [5, 10, 15, 2, 12], [10, 5, 15, 2, 12], [10, 15, 2, 5, 12], [15, 10, 2, 5, 12], [2, 15, 10, 5, 12], [15, 2, 10, 5, 12], [2, 10, 15, 5, 12], [10, 2, 15, 5, 12], [5, 15, 2, 10, 12], [15, 5, 2, 10, 12], [2, 15, 5, 10, 12], [15, 2, 5, 10, 12], [2, 5, 15, 10, 12], [5, 2, 15, 10, 12], [5, 10, 2, 15, 12], [10, 5, 2, 15, 12], [2, 10, 5, 15, 12], [10, 2, 5, 15, 12], [2, 5, 10, 15, 12], [5, 2, 10, 15, 12], [10, 12, 5, 2, 15], [12, 10, 5, 2, 15], [5, 12, 10, 2, 15], [12, 5, 10, 2, 15], [5, 10, 12, 2, 15], [10, 5, 12, 2, 15], [10, 12, 2, 5, 15], [12, 10, 2, 5, 15], [2, 12, 10, 5, 15], [12, 2, 10, 5, 15], [2, 10, 12, 5, 15], [10, 2, 12, 5, 15], [5, 12, 2, 10, 15], [12, 5, 2, 10, 15], [2, 12, 5, 10, 15], [12, 2, 5, 10, 15], [2, 5, 12, 10, 15], [5, 2, 12, 10, 15], [5, 10, 2, 12, 15], [10, 5, 2, 12, 15], [2, 10, 5, 12, 15], [10, 2, 5, 12, 15], [2, 5, 10, 12, 15], [5, 2, 10, 12, 15]])
end

for (n, nfact) âˆˆ [
  (5, 120), (6, 720), (7, 5040), (8, 40320),
  (9, 362880), (10, 3628800), (11, 39916800), # (12, 479001600)
]

  @testset "all $(n)! = $(nfact) perms of array of length $(n)" begin
    T = Int
    s = VT{T}(collect(1:n))

    @time @test length(perms(s)) == nfact
  end

end

#  0.000059 seconds (989 allocations: 75.094 KiB)
# Test Summary:                           | Pass  Total
# all 5! = 120 perms of array of length 5 |    1      1

#   0.024275 seconds (97.21 k allocations: 5.289 MiB)
# Test Summary:                           | Pass  Total
# all 6! = 720 perms of array of length 6 |    1      1

#   0.033202 seconds (136.40 k allocations: 8.686 MiB, 13.58% gc time)
# Test Summary:                            | Pass  Total
# all 7! = 5040 perms of array of length 7 |    1      1

#   0.063359 seconds (457.99 k allocations: 37.970 MiB)
# Test Summary:                             | Pass  Total
# all 8! = 40320 perms of array of length 8 |    1      1

#   0.577870 seconds (3.57 M allocations: 347.654 MiB, 32.90% gc time)
# Test Summary:                              | Pass  Total
# all 9! = 362880 perms of array of length 9 |    1      1

#   5.536038 seconds (34.74 M allocations: 3.521 GiB, 29.09% gc time)
# Test Summary:                                 | Pass  Total
# all 10! = 3628800 perms of array of length 10 |    1      1

# 334.693098 seconds (380.13 M allocations: 40.040 GiB, 85.64% gc time)
# Test Summary:                                  | Pass  Total
# all 11! = 39916800 perms of array of length 11 |    1      1
